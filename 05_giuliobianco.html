<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>05_giuliobianco</title>
</head>
<body>
    <button id="clickme">Click me</button>
    <div id="status">...</div>
    <script src="/socket.io/socket.io.js"></script>
    <script src="https://code.jquery.com/jquery-2.2.0.min.js"></script>
    <script>
    var socket = io('/');
    socket.on('status', function(data) {
        console.log(data);
        $("#status").html(data.pinStatus);
    });
    $('#clickme').on("click", doclick, blink);
    function doclick(event) {
        //console.log(event);
        payload = {};
        payload.timeStamp = event.timeStamp;
        socket.emit('doServer', payload);
    }
    function blink(socket) {

    after((2).seconds(), function() {
      this.turnOn();
    }.bind(this));

    after((5).seconds(), function() {
      this.turnOff();
    }.bind(this));
  }

  function turnOn(socket) {
    this.led.turnOn();
    this.emit('turned_on');
  }

    function turnOff(socket) {
    this.led.turnOff();
    this.emit('turned_off');
  }

   function toggle(socket) {
    this.led.toggle();
    if (this.led.isOn()) {
      this.emit('turned_on');
    } else {
      this.emit('turned_off');
    }
  }
});
    </script>

    <body>

</html>